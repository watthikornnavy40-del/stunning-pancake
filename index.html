import React, { useState, useEffect } from 'react';
import { motion, AnimatePresence, useMotionValue, useSpring } from 'framer-motion';
import { Sparkles, Music, MapPin, ChevronRight, X, Info, BookOpen, User } from 'lucide-react';

const regionsData = [
  {
    id: 0,
    name: '‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠',
    subtitle: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡πà‡∏≠‡∏ô‡∏ä‡πâ‡∏≠‡∏¢‡πÅ‡∏´‡πà‡∏á‡∏•‡πâ‡∏≤‡∏ô‡∏ô‡∏≤',
    desc: '‡∏ô‡∏≤‡∏è‡∏®‡∏¥‡∏•‡∏õ‡πå‡∏†‡∏≤‡∏Ñ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏°‡∏±‡∏Å‡∏°‡∏µ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡∏ä‡πâ‡∏≤ ‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏• ‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏ß‡∏¥‡∏ñ‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏ö‡∏™‡∏∏‡∏Ç‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡∏´‡∏ô‡∏≤‡∏ß‡πÄ‡∏¢‡πá‡∏ô',
    details: {
      history: '‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏¥‡∏ó‡∏ò‡∏¥‡∏û‡∏•‡∏à‡∏≤‡∏Å‡∏®‡∏¥‡∏•‡∏õ‡∏∞‡∏û‡∏°‡πà‡∏≤‡πÅ‡∏•‡∏∞‡πÑ‡∏ó‡πÉ‡∏´‡∏ç‡πà ‡∏ú‡∏™‡∏°‡∏ú‡∏™‡∏≤‡∏ô‡∏Å‡∏±‡∏ö‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏•‡πâ‡∏≤‡∏ô‡∏ô‡∏≤‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°',
      performances: [
        { name: '‡∏ü‡πâ‡∏≠‡∏ô‡πÄ‡∏•‡πá‡∏ö', detail: '‡∏Å‡∏≤‡∏£‡∏ü‡πâ‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏ß‡∏°‡πÄ‡∏•‡πá‡∏ö‡∏¢‡∏≤‡∏ß‡∏™‡∏µ‡∏ó‡∏≠‡∏á ‡∏™‡πà‡∏≤‡∏¢‡∏°‡∏∑‡∏≠‡∏≠‡πà‡∏≠‡∏ô‡∏ä‡πâ‡∏≠‡∏¢' },
        { name: '‡∏ü‡πâ‡∏≠‡∏ô‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô', detail: '‡∏ü‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô‡πÇ‡∏î‡∏¢‡∏ñ‡∏∑‡∏≠‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô‡∏à‡∏∏‡∏î‡πÑ‡∏ü‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏Ç‡πâ‡∏≤‡∏á' },
        { name: '‡∏ü‡πâ‡∏≠‡∏ô‡∏™‡∏≤‡∏ß‡πÑ‡∏´‡∏°', detail: '‡πÄ‡∏•‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö‡∏ó‡πà‡∏≤‡∏ó‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏´‡∏°‡πà‡∏≠‡∏ô‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÑ‡∏´‡∏°' }
      ],
      instruments: '‡∏™‡∏∞‡∏•‡πâ‡∏≠, ‡∏ã‡∏≠, ‡∏ã‡∏∂‡∏á, ‡∏Å‡∏•‡∏≠‡∏á‡∏™‡∏∞‡∏ö‡∏±‡∏î‡∏ä‡∏±‡∏¢',
      dress: '‡∏ô‡∏∏‡πà‡∏á‡∏ú‡πâ‡∏≤‡∏ã‡∏¥‡πà‡∏ô‡∏ï‡∏µ‡∏ô‡∏à‡∏Å ‡∏™‡∏ß‡∏°‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÅ‡∏Ç‡∏ô‡∏Å‡∏£‡∏∞‡∏ö‡∏≠‡∏Å ‡∏´‡πà‡∏°‡∏™‡πÑ‡∏ö‡∏ó‡∏±‡∏ö ‡πÄ‡∏Å‡∏•‡πâ‡∏≤‡∏ú‡∏°‡∏°‡∏ß‡∏¢‡∏ó‡∏±‡∏î‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ'
    },
    color: '#A855F7',
    icon: '‚ú®',
    bg: 'https://images.unsplash.com/photo-1598948123446-422bc3d1326c?auto=format&fit=crop&q=80&w=1000'
  },
  {
    id: 1,
    name: '‡∏†‡∏≤‡∏Ñ‡∏Å‡∏•‡∏≤‡∏á',
    subtitle: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ô‡∏∏‡∏Å‡∏™‡∏ô‡∏≤‡∏ô‡πÅ‡∏´‡πà‡∏á‡∏•‡∏∏‡πà‡∏°‡∏ô‡πâ‡∏≥',
    desc: '‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏ß‡∏¥‡∏ñ‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∑‡πà‡∏ô‡πÄ‡∏£‡∏¥‡∏á ‡∏ó‡πà‡∏≤‡∏£‡∏≥‡∏°‡∏±‡∏Å‡∏à‡∏∞‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ì‡∏µ‡∏ï',
    details: {
      history: '‡πÄ‡∏õ‡πá‡∏ô‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏∏‡∏á‡∏®‡∏£‡∏µ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ï‡∏ô‡πÇ‡∏Å‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡πå ‡∏à‡∏∂‡∏á‡∏°‡∏µ‡πÅ‡∏ö‡∏ö‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡πà‡∏á‡∏Ñ‡∏£‡∏±‡∏î‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏à‡∏¥‡∏ï‡∏£',
      performances: [
        { name: '‡∏£‡∏≥‡∏ß‡∏á‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô', detail: '‡∏ó‡πà‡∏≤‡∏£‡∏≥‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡πÅ‡∏ú‡∏ô‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô 10 ‡∏ó‡πà‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô' },
        { name: '‡πÄ‡∏ï‡πâ‡∏ô‡∏Å‡∏≥‡∏£‡∏≥‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏ß', detail: '‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏ß‡∏¥‡∏ñ‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≤‡∏ß' },
        { name: '‡∏£‡∏∞‡∏ö‡∏≥‡∏ä‡∏≤‡∏ß‡∏ô‡∏≤', detail: '‡πÅ‡∏™‡∏î‡∏á‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏£‡∏µ‡∏¢‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏ô‡∏≤' }
      ],
      instruments: '‡∏£‡∏∞‡∏ô‡∏≤‡∏î‡πÄ‡∏≠‡∏Å, ‡∏Ü‡πâ‡∏≠‡∏á‡∏ß‡∏á‡πÉ‡∏´‡∏ç‡πà, ‡∏ï‡∏∞‡πÇ‡∏û‡∏ô, ‡∏â‡∏¥‡πà‡∏á',
      dress: '‡∏ô‡∏∏‡πà‡∏á‡πÇ‡∏à‡∏á‡∏Å‡∏£‡∏∞‡πÄ‡∏ö‡∏ô ‡∏™‡∏ß‡∏°‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÅ‡∏Ç‡∏ô‡∏Å‡∏£‡∏∞‡∏ö‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏™‡πÑ‡∏ö ‡∏ä‡∏≤‡∏¢‡∏™‡∏ß‡∏°‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏£‡∏≤‡∏ä‡∏õ‡∏∞‡πÅ‡∏ï‡∏ô'
    },
    color: '#F59E0B',
    icon: 'üåæ',
    bg: 'https://images.unsplash.com/photo-1528154291023-a6525fabe5b4?auto=format&fit=crop&q=80&w=1000'
  },
  {
    id: 2,
    name: '‡∏†‡∏≤‡∏Ñ‡∏≠‡∏µ‡∏™‡∏≤‡∏ô',
    subtitle: '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏´‡πà‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏ö‡∏™‡∏π‡∏á',
    desc: '‡πÄ‡∏ô‡πâ‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß ‡∏Å‡∏£‡∏∞‡∏â‡∏±‡∏ö‡∏Å‡∏£‡∏∞‡πÄ‡∏â‡∏á ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ô‡∏∏‡∏Å‡∏™‡∏∏‡∏î‡πÄ‡∏´‡∏ß‡∏µ‡πà‡∏¢‡∏á ‡∏°‡∏±‡∏Å‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏û‡∏¥‡∏ò‡∏µ‡∏Å‡∏£‡∏£‡∏°',
    details: {
      history: '‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏ñ‡∏ô (‡πÄ‡∏ó‡∏ß‡∏î‡∏≤) ‡πÅ‡∏•‡∏∞‡∏û‡∏ç‡∏≤‡∏ô‡∏≤‡∏Ñ ‡∏ú‡∏π‡∏Å‡∏û‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏ù‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£‡∏£‡∏°',
      performances: [
        { name: '‡πÄ‡∏ã‡∏¥‡πâ‡∏á‡∏ö‡∏±‡πâ‡∏á‡πÑ‡∏ü', detail: '‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏û‡∏ì‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏π‡∏ä‡∏≤‡∏û‡∏ç‡∏≤‡πÅ‡∏ñ‡∏ô‡∏Ç‡∏≠‡∏ù‡∏ô' },
        { name: '‡∏ü‡πâ‡∏≠‡∏ô‡∏†‡∏π‡πÑ‡∏ó', detail: '‡∏•‡∏µ‡∏•‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏ä‡∏≤‡∏ß‡∏ú‡∏π‡πâ‡πÑ‡∏ó‡∏¢ ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á' },
        { name: '‡πÄ‡∏ã‡∏¥‡πâ‡∏á‡∏™‡∏ß‡∏¥‡∏á', detail: '‡πÄ‡∏•‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö‡∏ó‡πà‡∏≤‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏õ‡∏•‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏ß‡∏¥‡∏á' }
      ],
      instruments: '‡πÅ‡∏Ñ‡∏ô, ‡πÇ‡∏õ‡∏á‡∏•‡∏≤‡∏á, ‡∏û‡∏¥‡∏ì, ‡∏Å‡∏•‡∏≠‡∏á‡∏¢‡∏≤‡∏ß',
      dress: '‡∏ú‡πâ‡∏≤‡∏ù‡πâ‡∏≤‡∏¢/‡∏ú‡πâ‡∏≤‡πÑ‡∏´‡∏°‡∏°‡∏±‡∏î‡∏´‡∏°‡∏µ‡πà ‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á‡∏ô‡∏∏‡πà‡∏á‡∏ú‡πâ‡∏≤‡∏ñ‡∏∏‡∏á‡∏™‡∏±‡πâ‡∏ô‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡πÄ‡∏Ç‡πà‡∏≤ ‡πÉ‡∏™‡πà‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÅ‡∏Ç‡∏ô‡∏Å‡∏∏‡∏î'
    },
    color: '#EF4444',
    icon: 'ü•Å',
    bg: 'https://images.unsplash.com/photo-1527838832700-5059252407fa?auto=format&fit=crop&q=80&w=1000'
  },
  {
    id: 3,
    name: '‡∏†‡∏≤‡∏Ñ‡πÉ‡∏ï‡πâ',
    subtitle: '‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏≤‡∏ö‡∏™‡∏°‡∏∏‡∏ó‡∏£',
    desc: '‡πÇ‡∏î‡∏î‡πÄ‡∏î‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≠‡∏á‡πÑ‡∏ß ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ ‡πÅ‡∏•‡∏∞‡∏ó‡∏£‡∏á‡∏û‡∏•‡∏±‡∏á ‡∏™‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡πÅ‡∏Ç‡πá‡∏á‡∏Ç‡∏≠‡∏á‡∏ä‡∏≤‡∏ß‡πÉ‡∏ï‡πâ',
    details: {
      history: '‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏¥‡∏ó‡∏ò‡∏¥‡∏û‡∏•‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏°‡∏•‡∏≤‡∏¢‡∏π‡πÅ‡∏•‡∏∞‡∏≠‡∏¥‡∏ô‡πÄ‡∏î‡∏µ‡∏¢ ‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏ú‡πà‡∏≤‡∏ô‡∏ô‡∏¥‡πâ‡∏ß‡∏°‡∏∑‡∏≠',
      performances: [
        { name: '‡∏°‡πÇ‡∏ô‡∏£‡∏≤‡∏´‡πå (‡πÇ‡∏ô‡∏£‡∏≤)', detail: '‡∏Å‡∏≤‡∏£‡∏£‡∏≥‡∏ó‡∏µ‡πà‡∏î‡∏±‡∏î‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏ô‡∏¥‡πâ‡∏ß‡∏°‡∏∑‡∏≠‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ß‡∏¥‡∏à‡∏¥‡∏ï‡∏£‡∏ö‡∏£‡∏£‡∏à‡∏á' },
        { name: '‡∏´‡∏ô‡∏±‡∏á‡∏ï‡∏∞‡∏•‡∏∏‡∏á', detail: '‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏±‡∏á‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≠‡∏ú‡πâ‡∏≤‡∏Ç‡∏≤‡∏ß' },
        { name: '‡∏£‡∏≠‡∏á‡πÄ‡∏á‡πá‡∏á', detail: '‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡πâ‡∏ô‡∏£‡∏≥‡∏û‡∏∑‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏¥‡∏ó‡∏ò‡∏¥‡∏û‡∏•‡∏à‡∏≤‡∏Å‡∏°‡∏•‡∏≤‡∏¢‡∏π' }
      ],
      instruments: '‡∏ó‡∏±‡∏ö (‡∏Å‡∏•‡∏≠‡∏á‡πÇ‡∏ô‡∏£‡∏≤), ‡πÇ‡∏´‡∏°‡πà‡∏á, ‡∏â‡∏¥‡πà‡∏á, ‡∏õ‡∏µ‡πà‡∏Ñ‡∏π‡πà',
      dress: '‡∏ä‡∏∏‡∏î‡πÇ‡∏ô‡∏£‡∏≤‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡∏õ‡∏±‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏ß‡∏î‡∏•‡∏≤‡∏¢ ‡∏™‡∏ß‡∏°‡πÄ‡∏ó‡∏£‡∏¥‡∏î (‡∏ä‡∏é‡∏≤) ‡∏£‡∏≠‡∏á‡πÄ‡∏á‡πá‡∏á‡∏ô‡∏∏‡πà‡∏á‡∏ö‡∏≤‡∏ï‡∏¥‡∏Å'
    },
    color: '#0EA5E9',
    icon: 'üåä',
    bg: 'https://images.unsplash.com/photo-1552465011-b4e21bf6e79a?auto=format&fit=crop&q=80&w=1000'
  }
];

const App = () => {
  const [index, setIndex] = useState(0);
  const [isDetailOpen, setIsDetailOpen] = useState(false);
  const dragRotation = useMotionValue(0);
  const smoothRotation = useSpring(dragRotation, { stiffness: 200, damping: 25 });
  
  const activeRegion = regionsData[index];

  const handleDragEnd = (_, info) => {
    const currentRotation = dragRotation.get();
    const newIndex = Math.round(currentRotation / -90) % 4;
    const normalizedIndex = (newIndex < 0 ? newIndex + 4 : newIndex) % 4;
    
    const snapTarget = Math.round(currentRotation / 90) * 90;
    dragRotation.set(snapTarget);
    setIndex(normalizedIndex);
  };

  const rotateTo = (idx) => {
    dragRotation.set(idx * -90);
    setIndex(idx);
  };

  return (
    <div className="min-h-screen bg-[#050507] text-white font-sans overflow-hidden">
      {/* Background Image with Overlay */}
      <AnimatePresence mode='wait'>
        <motion.div 
          key={activeRegion.id}
          initial={{ opacity: 0 }}
          animate={{ opacity: 0.2 }}
          exit={{ opacity: 0 }}
          className="fixed inset-0 z-0 bg-cover bg-center transition-all duration-1000"
          style={{ backgroundImage: `url(${activeRegion.bg})` }}
        />
      </AnimatePresence>
      <div className="fixed inset-0 z-0 bg-gradient-to-b from-[#050507]/80 via-transparent to-[#050507]" />

      {/* Main UI */}
      <div className="relative z-10 flex flex-col min-h-screen">
        <header className="p-8 flex justify-between items-center">
          <div className="flex items-center gap-3">
            <div className="w-12 h-12 bg-white text-black rounded-full flex items-center justify-center font-black text-xl shadow-[0_0_20px_rgba(255,255,255,0.3)]">üáπüá≠</div>
            <h1 className="text-2xl font-black tracking-widest uppercase">Thai Artistry</h1>
          </div>
          <button className="p-3 bg-white/5 rounded-full hover:bg-white/10 transition-colors">
            <Info size={24} />
          </button>
        </header>

        <div className="flex-1 flex flex-col lg:flex-row items-center justify-center px-8 gap-20">
          {/* Draggable Wheel Section */}
          <div className="relative w-[340px] h-[340px] lg:w-[550px] lg:h-[550px] flex items-center justify-center">
             {/* Center Glow */}
             <div 
                className="absolute w-40 h-40 rounded-full blur-[80px] transition-colors duration-700"
                style={{ backgroundColor: activeRegion.color }}
             />
             
             <motion.div
              drag="rotate"
              style={{ rotate: smoothRotation }}
              onDragEnd={handleDragEnd}
              className="relative w-full h-full rounded-full border border-white/10 flex items-center justify-center cursor-grab active:cursor-grabbing z-10"
             >
                {regionsData.map((reg, i) => (
                  <div
                    key={reg.id}
                    className="absolute"
                    style={{ transform: `rotate(${i * 90}deg) translateY(-240px) rotate(-${i * 90}deg)` }}
                  >
                    <button 
                      onClick={() => rotateTo(i)}
                      className={`transition-all duration-500 flex flex-col items-center ${index === i ? 'scale-125' : 'opacity-30 scale-90 grayscale'}`}
                    >
                      <div className="w-16 h-16 lg:w-24 lg:h-24 rounded-3xl bg-white/5 backdrop-blur-xl border border-white/20 flex items-center justify-center text-4xl shadow-2xl">
                        {reg.icon}
                      </div>
                      <span className="mt-3 text-[10px] font-bold tracking-[0.3em] uppercase">{reg.name}</span>
                    </button>
                  </div>
                ))}
                
                {/* Decorative Circles */}
                <div className="absolute inset-10 rounded-full border border-white/5 pointer-events-none" />
                <div className="absolute inset-20 rounded-full border border-dashed border-white/10 animate-[spin_100s_linear_infinite] pointer-events-none" />
             </motion.div>
          </div>

          {/* Info Section */}
          <div className="max-w-xl text-center lg:text-left z-20">
            <AnimatePresence mode="wait">
              <motion.div
                key={index}
                initial={{ opacity: 0, x: 20 }}
                animate={{ opacity: 1, x: 0 }}
                exit={{ opacity: 0, x: -20 }}
                transition={{ duration: 0.5 }}
              >
                <div className="flex items-center justify-center lg:justify-start gap-2 mb-4">
                  <MapPin size={16} style={{ color: activeRegion.color }} />
                  <span className="text-sm font-bold tracking-widest text-white/40 uppercase">‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢</span>
                </div>
                <h2 className="text-7xl lg:text-9xl font-black mb-4 tracking-tighter leading-none">
                  {activeRegion.name}
                </h2>
                <p className="text-xl lg:text-2xl font-light text-white/80 mb-8 leading-relaxed">
                  {activeRegion.desc}
                </p>
                <button 
                  onClick={() => setIsDetailOpen(true)}
                  className="group relative inline-flex items-center gap-4 bg-white text-black px-10 py-5 rounded-full font-bold text-lg overflow-hidden hover:pr-12 transition-all active:scale-95 shadow-xl"
                >
                  ‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á <ChevronRight className="group-hover:translate-x-1 transition-transform" />
                </button>
              </motion.div>
            </AnimatePresence>
          </div>
        </div>

        <footer className="p-12 text-center text-white/20 text-xs tracking-widest uppercase">
          ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏Ñ ‚Ä¢ Thai Culture Digital Archive 2026
        </footer>
      </div>

      {/* Full Detail Overlay */}
      <AnimatePresence>
        {isDetailOpen && (
          <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            className="fixed inset-0 z-[100] bg-black/95 backdrop-blur-2xl overflow-y-auto p-6 md:p-20"
          >
            <button 
              onClick={() => setIsDetailOpen(false)}
              className="fixed top-10 right-10 p-4 bg-white/10 rounded-full hover:bg-white/20 transition-all z-[110]"
            >
              <X size={32} />
            </button>

            <div className="max-w-4xl mx-auto space-y-20 pt-10">
              <div className="text-center space-y-4">
                <motion.span 
                  initial={{ y: 20, opacity: 0 }} animate={{ y: 0, opacity: 1 }}
                  className="inline-block px-4 py-1 rounded-full border border-white/20 text-xs tracking-[0.5em] uppercase"
                  style={{ color: activeRegion.color }}
                >
                  {activeRegion.subtitle}
                </motion.span>
                <motion.h3 
                  initial={{ y: 20, opacity: 0 }} animate={{ y: 0, opacity: 1 }} transition={{ delay: 0.1 }}
                  className="text-6xl md:text-8xl font-black"
                >
                  {activeRegion.name}
                </motion.h3>
              </div>

              <div className="grid md:grid-cols-2 gap-12">
                <section className="space-y-6">
                  <div className="flex items-center gap-3 text-white/40 uppercase tracking-widest text-sm font-bold border-b border-white/10 pb-2">
                    <BookOpen size={18} /> ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏≤
                  </div>
                  <p className="text-xl text-white/70 leading-relaxed font-light">
                    {activeRegion.details.history}
                  </p>
                </section>

                <section className="space-y-6">
                  <div className="flex items-center gap-3 text-white/40 uppercase tracking-widest text-sm font-bold border-b border-white/10 pb-2">
                    <Music size={18} /> ‡∏î‡∏ô‡∏ï‡∏£‡∏µ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏≤‡∏¢
                  </div>
                  <div className="space-y-4">
                    <div>
                      <span className="text-white/30 text-xs uppercase block mb-1">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏ô‡∏ï‡∏£‡∏µ‡∏´‡∏•‡∏±‡∏Å</span>
                      <p className="text-lg font-medium">{activeRegion.details.instruments}</p>
                    </div>
                    <div>
                      <span className="text-white/30 text-xs uppercase block mb-1">‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏≤‡∏¢</span>
                      <p className="text-lg font-medium">{activeRegion.details.dress}</p>
                    </div>
                  </div>
                </section>
              </div>

              <section className="space-y-8">
                <div className="flex items-center gap-3 text-white/40 uppercase tracking-widest text-sm font-bold border-b border-white/10 pb-2">
                  <User size={18} /> ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡πÇ‡∏î‡∏î‡πÄ‡∏î‡πà‡∏ô
                </div>
                <div className="grid md:grid-cols-3 gap-6">
                  {activeRegion.details.performances.map((perf, i) => (
                    <motion.div 
                      key={i}
                      whileHover={{ y: -5 }}
                      className="p-6 bg-white/5 rounded-3xl border border-white/5 hover:border-white/20 transition-all"
                    >
                      <h4 className="text-xl font-bold mb-2 text-yellow-500">{perf.name}</h4>
                      <p className="text-sm text-white/60 leading-relaxed">{perf.detail}</p>
                    </motion.div>
                  ))}
                </div>
              </section>

              <div className="h-40" /> {/* Spacer */}
            </div>
          </motion.div>
        )}
      </AnimatePresence>
    </div>
  );
};

export default App;

	